# yaml-language-server: $schema=https://raw.githubusercontent.com/dhhyi/devcontainer-creator/dist/language_schema.json
extends: dcc://javascript-pnpm
language:
  name: vue.js
  version: |
    java -version
    node --version
    pnpm --version
devcontainer:
  name: gin-rummy-scoreboard
  build:
    root:
      - RUN wget -qO- https://github.com/sterlp/svg2png/releases/download/v1.2.1/svg2png-1.2.1.jar -O /opt/svg2png.jar
    user:
      - RUN pnpm i -g @vue/cli
      - RUN mise use -g java@21
    files:
      - type: script
        path: /usr/local/bin/svg2png
        content: |
          #!/bin/bash
          java -jar /opt/svg2png.jar "$@"
  publish:
    image: ghcr.io/dhhyi/gin-rummy-scoreboard-devcontainer
  instantiate: |
    fish -c 'if test -f package.json; pnpm install --frozen-lockfile && pnpm playwright install chromium --with-deps; end'
  ports:
    - 5173
  selftest: |
    svg2png
extras:
  - named-volumes
  - tmux
namedVolumes:
  node_modules: gin-rummy-scoreboard-node-modules
  $HOME/.cache/pnpm: pnpm-store
  $HOME/.cache/ms-playwright: playwright-cache
vscode:
  extensions:
    - Vue.volar
    - esbenp.prettier-vscode
    - bradlc.vscode-tailwindcss
    - streetsidesoftware.code-spell-checker
    - bierner.markdown-preview-github-styles
    - bierner.markdown-mermaid
    - github.vscode-github-actions
    - yzhang.markdown-all-in-one
    - redhat.vscode-yaml
    - aaron-bond.better-comments
    - peakchen90.open-html-in-browser
    - AntiAntiSepticeye.vscode-color-picker
    - ms-playwright.playwright
  settings:
    editor.defaultFormatter: esbenp.prettier-vscode
    emmet.includeLanguages:
      vue-html: html
      vue: html
